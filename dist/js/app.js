var app=angular.module("tabataApp",[]);app.controller("tabataAppCtrl",["$scope",function(e){function t(e){return(10>e?"0":"")+e}function n(e){var n=parseInt(e[2]),o=parseInt(e[0]);"00"==n?"00"==o?e[0]=t(o):(e[2]="59",e[0]=t(o-1)):e[2]=t(n-1)}function o(e){var n=parseInt(e[2]),o=parseInt(e[0]);"59"==n?(e[2]="00",e[0]=t(o+1)):e[2]=t(n+1)}function i(){a.timeInterval?(clearInterval(timeLeftInterval),a.timeInterval=!1):a.breakInterval&&(clearInterval(breakLeftInterval),a.breakInterval=!1)}$("#volume-switch").prop("checked",!0),e.roundsOb={roundsLeft:1,rounds:8};var a={breakInterval:!1,timeInterval:!1};e.countOb={breakLeft:["00",":","10"],timeLeft:["00",":","20"]},e.countJoinedOb={breakLeftJoined:e.countOb.breakLeft.join(""),timeLeftJoined:e.countOb.timeLeft.join("")},e.optionOb={timeOff:["00",":","10"],timeOn:["00",":","20"]},e.optionJoinedOb={timeOnJoined:e.optionOb.timeOn.join(""),timeOffJoined:e.optionOb.timeOff.join("")},e.changeRounds=function(t){var n=parseInt(e.roundsOb.rounds);"minus"===t&&n>=2?e.roundsOb.rounds=n-1:"plus"===t&&(e.roundsOb.rounds=n+1)},e.changeTimeOn=function(t){"minus"===t?n(e.optionOb.timeOn):"plus"===t&&o(e.optionOb.timeOn),e.optionJoinedOb.timeOnJoined=e.optionOb.timeOn.join("");var i=e.optionOb.timeOn.slice();e.countOb.timeLeft=i,e.countJoinedOb.timeLeftJoined=e.optionJoinedOb.timeOnJoined,e.$apply},e.changeTimeOff=function(t){"minus"===t?n(e.optionOb.timeOff):"plus"===t&&o(e.optionOb.timeOff),e.optionJoinedOb.timeOffJoined=e.optionOb.timeOff.join("");var i=e.optionOb.timeOff.slice();e.countOb.breakLeft=i,e.countJoinedOb.breakLeftJoined=e.optionJoinedOb.timeOffJoined,e.$apply},e.startClock=function(){$("#pause-button").removeClass("hidden"),$("#start-button").addClass("hidden"),e.roundsOb.roundsLeft<=e.roundsOb.rounds?$("#time-left").hasClass("hidden")?breakLeftInterval=setInterval(function(){a.breakInterval=!0;var n=parseInt(e.countOb.breakLeft[0]),o=parseInt(e.countOb.breakLeft[2]);if(0!=o){if(e.countOb.breakLeft[2]=t(o-1),e.countJoinedOb.breakLeftJoined=e.countOb.breakLeft.join(""),e.$apply(),o>=2&&4>=o&&$("#volume-switch").prop("checked")){new buzz.sound("dist/buzz/beep-07.mp3").play()}else if(1==o&&$("#volume-switch").prop("checked")){new buzz.sound("dist/buzz/beep-08b.mp3").play()}}else if(0==o&&0!=n)e.countOb.breakLeft[0]=t(n-1),e.countOb.breakLeft[2]="59",e.countJoinedOb.breakLeftJoined=e.countOb.breakLeft.join(""),e.$apply();else{$("#time-left").toggleClass("hidden"),$("#break-left").toggleClass("hidden"),$("#current-timer").css("background-color","#a5d6a7");var i=e.optionOb.timeOff.slice();e.countOb.breakLeft=i,e.countJoinedOb.breakLeftJoined=e.optionJoinedOb.timeOffJoined,e.$apply,clearInterval(breakLeftInterval),a.breakInterval=!1,e.startClock()}},200):timeLeftInterval=setInterval(function(){a.timeInterval=!0;var n=parseInt(e.countOb.timeLeft[2]),o=parseInt(e.countOb.timeLeft[0]);if(0!=n){if(e.countOb.timeLeft[2]=t(n-1),e.countJoinedOb.timeLeftJoined=e.countOb.timeLeft.join(""),e.$apply(),n>=2&&4>=n&&$("#volume-switch").prop("checked")){new buzz.sound("dist/buzz/beep-07.mp3").play()}else if(1==n&&$("#volume-switch").prop("checked")){new buzz.sound("dist/buzz/beep-08b.mp3").play()}}else if(0==n&&0!=o)e.countOb.timeLeft[0]=t(o-1),e.countOb.timeLeft[2]="59",e.countJoinedOb.timeLeftJoined=e.countOb.timeLeft.join(""),e.$apply();else{e.roundsOb.roundsLeft=e.roundsOb.roundsLeft+1,$("#break-left").toggleClass("hidden"),$("#time-left").toggleClass("hidden"),$("#current-timer").css("background-color","#ef9a9a");var i=e.optionOb.timeOn.slice();e.countOb.timeLeft=i,e.countJoinedOb.timeLeftJoined=e.optionJoinedOb.timeOnJoined,e.$apply,clearInterval(timeLeftInterval),a.timeInterval=!1,e.startClock()}},200):e.clear()},e.pauseClock=function(){i(),$("#pause-button").addClass("hidden"),$("#start-button").removeClass("hidden")},e.clear=function(){var t=e.optionOb.timeOff.slice();e.countOb.breakLeft=t,e.countJoinedOb.breakLeftJoined=e.optionJoinedOb.timeOffJoined,e.roundsOb.roundsLeft=1;var n=e.optionOb.timeOn.slice();e.countOb.timeLeft=n,e.countJoinedOb.timeLeftJoined=e.optionJoinedOb.timeOnJoined,e.$apply,$("#time-left").addClass("hidden"),$("#break-left").removeClass("hidden"),$("#current-timer").css("background-color","#ef9a9a"),$("#pause-button").addClass("hidden"),$("#start-button").removeClass("hidden"),i()}}]);