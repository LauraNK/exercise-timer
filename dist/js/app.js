var app=angular.module("tabataApp",[]);app.controller("tabataAppCtrl",["$scope",function(e){function t(e){return(10>e?"0":"")+e}function n(e){var n=parseInt(e[2]),i=parseInt(e[0]);"00"==n?"00"==i?e[0]=t(i):(e[2]="59",e[0]=t(i-1)):e[2]=t(n-1)}function i(e){var n=parseInt(e[2]),i=parseInt(e[0]);"59"==n?(e[2]="00",e[0]=t(i+1)):e[2]=t(n+1)}function a(){f?(clearInterval(timeLeftInterval),f=!1):r&&(clearInterval(breakLeftInterval),r=!1)}$("#volume-switch").prop("checked",!0),e.roundsLeft=1,e.breakLeft=["00",":","10"],e.timeLeft=["00",":","20"],e.breakLeftJoined=e.breakLeft.join(""),e.timeLeftJoined=e.timeLeft.join(""),e.rounds=8,e.timeOff=["00",":","10"],e.timeOn=["00",":","20"],e.timeOnJoined=e.timeOn.join(""),e.timeOffJoined=e.timeOff.join("");var r=!1,f=!1;e.changeRounds=function(t){var n=parseInt(e.rounds);"minus"===t&&0!=n?e.rounds=n-1:"plus"===t&&(e.rounds=n+1)},e.changeTimeOn=function(t){"minus"===t?n(e.timeOn):"plus"===t&&i(e.timeOn),e.timeOnJoined=e.timeOn.join("");var a=e.timeOn.slice();e.timeLeft=a,e.timeLeftJoined=e.timeOnJoined,e.$apply},e.changeTimeOff=function(t){"minus"===t?n(e.timeOff):"plus"===t&&i(e.timeOff),e.timeOffJoined=e.timeOff.join("");var a=e.timeOff.slice();e.breakLeft=a,e.breakLeftJoined=e.timeOffJoined,e.$apply},e.startClock=function(){$("#pause-button").removeClass("hidden"),$("#start-button").addClass("hidden"),e.roundsLeft<=e.rounds?$("#time-left").hasClass("hidden")?breakLeftInterval=setInterval(function(){r=!0;var n=parseInt(e.breakLeft[0]),i=parseInt(e.breakLeft[2]);if(0!=i){if(e.breakLeft[2]=t(i-1),e.breakLeftJoined=e.breakLeft.join(""),e.$apply(),i>=2&&4>=i&&$("#volume-switch").prop("checked")){new buzz.sound("dist/buzz/beep-07.mp3").play()}else if(1==i&&$("#volume-switch").prop("checked")){new buzz.sound("dist/buzz/beep-08b.mp3").play()}}else if(0==i&&0!=n)e.breakLeft[0]=t(n-1),e.breakLeft[2]="59",e.breakLeftJoined=e.breakLeft.join(""),e.$apply();else{$("#time-left").toggleClass("hidden"),$("#break-left").toggleClass("hidden"),$("#current-timer").css("background-color","#a5d6a7");var a=e.timeOff.slice();e.breakLeft=a,e.breakLeftJoined=e.timeOffJoined,e.$apply,clearInterval(breakLeftInterval),r=!1,e.startClock()}},1e3):timeLeftInterval=setInterval(function(){f=!0;var n=parseInt(e.timeLeft[2]),i=parseInt(e.timeLeft[0]);if(0!=n){if(e.timeLeft[2]=t(n-1),e.timeLeftJoined=e.timeLeft.join(""),e.$apply(),n>=2&&4>=n&&$("#volume-switch").prop("checked")){new buzz.sound("dist/buzz/beep-07.mp3").play()}else if(1==n&&$("#volume-switch").prop("checked")){new buzz.sound("dist/buzz/beep-08b.mp3").play()}}else if(0==n&&0!=i)e.timeLeft[0]=t(i-1),e.timeLeft[2]="59",e.timeLeftJoined=e.timeLeft.join(""),e.$apply();else{e.roundsLeft=e.roundsLeft+1,$("#break-left").toggleClass("hidden"),$("#time-left").toggleClass("hidden"),$("#current-timer").css("background-color","#ef9a9a");var a=e.timeOn.slice();e.timeLeft=a,e.timeLeftJoined=e.timeOnJoined,e.$apply,clearInterval(timeLeftInterval),f=!1,e.startClock()}},1e3):e.clear()},e.pauseClock=function(){a(),$("#pause-button").addClass("hidden"),$("#start-button").removeClass("hidden")},e.clear=function(){var t=e.timeOff.slice();e.breakLeft=t,e.breakLeftJoined=e.timeOffJoined,e.roundsLeft=1;var n=e.timeOn.slice();e.timeLeft=n,e.timeLeftJoined=e.timeOnJoined,e.$apply,$("#time-left").addClass("hidden"),$("#break-left").removeClass("hidden"),$("#current-timer").css("background-color","#ef9a9a"),$("#pause-button").addClass("hidden"),$("#start-button").removeClass("hidden"),a()}}]);